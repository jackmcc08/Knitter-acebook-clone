<% if current_user %>
  Hello, <%= current_user.username %>!.
  <%= link_to "Log Out", logout_path %>
<% else %>
  <%= link_to "Sign Up", signup_path %> or
  <%= link_to "Log In", login_path %>
<% end %>

<% @posts.each do |post| %>

  <p class="post"><%= post.message %>

  <br>Posted by: <%= User.find(post.user_id).username %>
  </p>
  <div id="comments-div">
    <%= render post.comments %>
  </div>
  <div id="new-comment-form">
    <%# <%= render partial: 'comments/form', locals: { the_post: post } %> The render of the form is creating issues - it is not passing the variable %>
  </div>

  <p class="comments-link"><%= link_to post_comments_path(post.id) do %>
    Comments
  <% end %>
  </p>

  <br>

<% end %>

<% if current_user %>
  <%= link_to new_post_path do %>
    New post
  <% end %>
<% end %>

<br>
<br>
